
def decrementList(list, amount, min_amount=0):
	new_list = []
	for item in list:
		item -= amount
		if item > min_amount:
			new_list.append(item)
	return new_list

data = [184,184,185,184,182,181,179,177,175,176,177,178,176,175,173,173,172,172,172,172,172,171,170,169,165,161,157,152,147,136,135,134,133,149,155,163,165,166,168,167,167,166,163,160,157,154,152,152,151,152,154,156,158,160,162,164,166,168,171,173,170,167,164,161,157,154,155,156,156,157,158,159,160,162,167,172,177,183,179,175,170,164,158,151,152,152,153,156,160,163,156,148,141,142,142,143,146,148,151,156,162,167,166,165,163,157,151,146,148,150,152,159,166,173,169,165,161,165,168,172,174,176,178,176,173,171,165,159,153,150,148,145,153,160,168,172,176,180,176,171,166,167,169,170,173,176,179,175,171,168,160,153,146,143,141,139,145,151,157,168,178,189,181,173,165,167,169,171,173,174,176,173,169,166,161,156,150,146,143,139,138,137,137,151,164,178,173,169,170,169,167,165,166,167,171,182,192,209,198,192,187,186,185,184,175,167,172,162,152,138,134,131,127,127,126,126,123,120,117,124,131,138,153,165,176,172,168,164,155,145,126,128,129,131,136,142,148,146,143,141,130,118,107,101,97,92,90,89,87,94,101,108,101,96,91,92,93,94,96,98,99,100,101,102,111,119,128,131,134,137,149,154,160,167,174,182,180,179,177,172,167,162,159,157,154,154,153,153,156]
pm_residue = []
pm_residue_value = 0
pm25_residue_max = None
pm25_residue_min = None
ppp = []
for pm in data:		
    if pm > 50:
        pm_residue.append(pm)
        pm_residue_value = sum(pm_residue)
        # Track min/max residue
        if pm25_residue_max is None or pm_residue_value > pm25_residue_max:
            pm25_residue_max = pm_residue_value
        if pm25_residue_min is None or pm_residue_value < pm25_residue_min:
            pm25_residue_min = pm_residue_value
    ppp.append(pm_residue_value)
    pm_residue = decrementList(pm_residue, 1)

# plot data in blue, ppp in red
import matplotlib.pyplot as plt
plt.plot(data, 'b')
plt.plot(ppp, 'r')
plt.show()
